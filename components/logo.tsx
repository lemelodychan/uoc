'use client'

import { useTheme } from 'next-themes'
import { useEffect, useState } from 'react'
import Image from 'next/image'

interface LogoProps {
  className?: string
  width?: number
  height?: number
}

export function Logo({ className = "", width = 144, height = 92 }: LogoProps) {
  const { resolvedTheme } = useTheme()
  const [mounted, setMounted] = useState(false)

  useEffect(() => {
    setMounted(true)
  }, [])

  if (!mounted) {
    // Show a placeholder while loading to prevent hydration mismatch
    return (
      <div 
        className={`bg-muted animate-pulse rounded ${className}`}
        style={{ width, height }}
      />
    )
  }

  const logoSrc = resolvedTheme === 'dark' ? '/logo_dark.svg' : '/logo_light.svg'
  const altText = 'UOC DND 5e'

  return (
    <Image
      src={logoSrc}
      alt={altText}
      width={width}
      height={height}
      className={className}
      priority
    />
  )
}

// Alternative version using inline SVG for better performance
export function LogoSVG({ className = "", width = 144, height = 92 }: LogoProps) {
  const { resolvedTheme } = useTheme()
  const [mounted, setMounted] = useState(false)

  useEffect(() => {
    setMounted(true)
  }, [])

  if (!mounted) {
    return (
      <div 
        className={`bg-muted animate-pulse rounded ${className}`}
        style={{ width, height }}
      />
    )
  }

  const isDark = resolvedTheme === 'dark'
  const diceColor = isDark ? '#CCCCCC' : '#444444'
  const textColor = isDark ? 'white' : '#0F0F0F'

  return (
    <svg 
      width={width} 
      height={height} 
      viewBox="0 0 144 92" 
      fill="none" 
      xmlns="http://www.w3.org/2000/svg"
      className={className}
    >
      <path 
        d="M47.2356 62.1903V41.1716C47.2356 31.642 54.9969 23.9164 64.5704 23.9164V32.0313C59.4989 32.0313 55.388 36.1234 55.388 41.1716V62.1903C55.388 71.288 62.7967 78.6627 71.9363 78.6627H84.7039C93.8435 78.6627 101.252 71.288 101.252 62.1903V51.9254C101.252 49.6847 103.077 47.8679 105.328 47.8679C107.579 47.8679 109.405 49.6847 109.405 51.9254V62.1903C109.405 75.7693 98.3455 86.7777 84.7039 86.7777H71.9363C58.2947 86.7777 47.2356 75.7693 47.2356 62.1903Z" 
        fill={diceColor}
      />
      <path 
        d="M51.3667 5C54.9703 5.00004 58.0711 5.64694 60.6691 6.93995C63.2251 8.2747 65.1944 10.1516 66.5771 12.5708C67.918 15.0317 68.5893 17.9304 68.5893 21.2671V26.75C68.5915 26.7488 68.5939 26.7483 68.5961 26.7471L68.6642 41.8209V52.8324C68.6642 55.8355 69.5224 58.2344 71.2403 60.028C73.0002 61.8215 75.4101 62.7183 78.469 62.7183C81.5699 62.7183 83.9797 61.8216 85.6978 60.028C87.4158 58.2344 88.2749 55.8356 88.2749 52.8324V41.8209C88.2749 38.8177 87.4159 36.4189 85.6978 34.6253C83.9797 32.8317 81.5699 31.935 78.469 31.935C76.4158 31.9349 77 31.935 74.2931 31.935V27.7343C74.2931 26.0856 74.2931 25.9375 74.2931 24.5819C74.7262 24.5619 78.0212 24.5523 78.469 24.5523C84.0004 24.5523 88.4007 26.0746 91.6692 29.1196C94.9376 32.1228 96.5711 36.4401 96.5711 42.071V52.5823C96.5711 58.2133 94.9377 62.5518 91.6692 65.5967C88.4007 68.6 84.0003 70.101 78.469 70.101C72.938 70.101 68.5383 68.5997 65.2699 65.5967C62.0014 62.5518 60.367 58.2133 60.367 52.5823V48.015H60.2921V21.017C60.2921 18.3476 59.5372 16.2411 58.0287 14.6978C56.4783 13.1548 54.2578 12.3828 51.3667 12.3827C48.4754 12.3827 46.2747 13.1545 44.7662 14.6978C43.2159 16.2411 42.4414 18.3477 42.4413 21.017V24.5523H42.4452V52.9575C42.4452 56.2944 41.7535 59.1938 40.3706 61.6548C39.0298 64.0739 37.0604 65.9509 34.4626 67.2856C31.9065 68.5787 28.8263 69.2255 25.2226 69.2256C21.619 69.2256 18.5182 68.5786 15.9203 67.2856C13.3641 65.9509 11.3941 64.074 10.0112 61.6548C8.67031 59.1938 8 56.2944 8 52.9575V24.5523C12.1481 24.5523 9.85726 24.5525 12.1481 24.5523C14.4391 24.5523 12.1481 24.5523 16.2972 24.5523V53.2076C16.2972 55.8771 17.0512 57.9844 18.5597 59.5277C20.1101 61.0709 22.3313 61.8419 25.2226 61.8419C28.1137 61.8419 30.3137 61.0708 31.8222 59.5277C33.3726 57.9844 34.148 55.8771 34.148 53.2076V24.5523H34.1442V21.2671C34.1442 17.9305 34.8351 15.0316 36.2177 12.5708C37.5587 10.1515 39.5287 8.27472 42.1268 6.93995C44.6829 5.64689 47.763 5 51.3667 5Z" 
        fill={textColor}
      />
      <path 
        d="M101.302 41.0935C101.302 35.4624 102.894 31.1452 106.079 28.142C109.263 25.0972 113.579 23.5747 119.027 23.5747C124.432 23.5747 128.602 25.0554 131.535 28.0169C134.51 30.9367 135.998 34.9625 135.998 40.0929V40.1941H127.826V39.8418C127.826 37.2559 127.093 35.129 125.626 33.4606C124.202 31.7922 122.002 30.9574 119.027 30.9574C116.094 30.9574 113.789 31.8542 112.113 33.6478C110.436 35.4413 109.599 37.8817 109.599 40.9684V51.7298C109.599 54.7747 110.436 57.2151 112.113 59.0504C113.789 60.844 116.093 61.7407 119.027 61.7408C122.002 61.7408 124.202 60.9066 125.626 59.2385C127.084 57.5389 127.817 55.4267 127.825 52.9031H135.995C135.939 57.8929 134.453 61.8402 131.535 64.7443C128.602 67.664 124.432 69.1235 119.027 69.1235C113.579 69.1234 109.263 67.6222 106.079 64.6192C102.894 61.5742 101.302 57.2358 101.302 51.6047V41.0935Z" 
        fill={textColor}
      />
    </svg>
  )
}
